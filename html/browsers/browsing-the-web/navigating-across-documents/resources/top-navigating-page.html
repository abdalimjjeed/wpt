<!DOCTYPE html>
<meta charset="utf-8">
<title>Page that navigates its top</title>
<script src=/common/get-host-info.sub.js></script>
<script src=/resources/testdriver.js></script>
<script src=/resources/testdriver-vendor.js></script>
<script>
(async function() {
  const params = new URL(window.location).searchParams;
  if (params.get("userGesture") === "child") {
    await test_driver.bless("navigate top frame");
  }

  const path = new URL("page-that-post-message-to-opener.html", window.location).pathname;
  const destination = get_host_info().HTTP_NOTSAMESITE_ORIGIN + path;

  try {
    top.location = destination;
  } catch {
    top.opener.postMessage('Denied', '*');
  }
})();
</script>
