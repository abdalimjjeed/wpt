<!DOCTYPE html>
<meta charset="utf-8">
<script src=/common/get-host-info.sub.js></script>
<script src=/resources/testdriver.js></script>
<script src=/resources/testdriver-vendor.js></script>
<title>Page that embeds an iframe that navigates its top</title>
<body></body>
<script>
(async function() {
  const params = new URL(window.location).searchParams;
  const userGesture = params.get("userGesture");

  if (userGesture === "parent") {
    await test_driver.bless("add child frame");
  }

  const url = new URL("top-navigating-page.html", window.location);
  url.host = get_host_info().REMOTE_HOST;  // Cross-origin.
  url.searchParams.set("userGesture", userGesture);

  const iframe = document.createElement('iframe');
  iframe.src = url;
  document.body.appendChild(iframe);
})();
</script>
